name: Deploy to Render when image is pushed to GHCR

on:
  workflow_run:
    workflows: ["Build and push Docker images to Container Registry"]
    types:
      - completed

jobs:
    render-deployment:
      runs-on: ubuntu-latest
      steps:
        - name: Trigger backend deployment
          env:
            deploy_url_be: ${{ secrets.RENDER_DEPLOY_HOOK_URL_BACKEND }}
          run: curl '$deploy_url_be'

        - name: Trigger frontend deployment
          env:
            deploy_url_fe: ${{ secrets.RENDER_DEPLOY_HOOK_URL_FRONTEND }}
          run: curl '$deploy_url_fe'
